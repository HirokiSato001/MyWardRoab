<ons-page id="login">
	<script src="js/user.js"></script>
	<script src="js/item.js"></script>

	<script language="javascript" type="text/javascript">
		function OnLinkClick() {
          document.getElementById('nav').pushPage('userRegist.html', {});
            target = document.getElementById("output");
            return false;
        }
	</script>

	<ons-toolbar>
		<div class="center">ログイン</div>
	</ons-toolbar>

	<div style="text-align: center; margin-top: 30px;">
		<p>
			ユーザーID（メールアドレス）
			<br>
			<ons-input id="mailAddress" modifier="underbar" placeholder="MailAddress" float></ons-input>
		</p>
		<p>
			パスワード
			<br>
			<ons-input id="password" type="password" modifier="underbar" placeholder="Password" float></ons-input>
		</p>
		<p style="margin-top: 30px;">
			<ons-button onclick="login()">ログイン</ons-button>
		</p>
    <br>
		<p>
			<u>
				<a href="javascript:OnLinkClick();">新規登録はこちら</a><br />
				<br>
				<div id="output"></div>
			</u>
		</p>
		<p>
			<u>
				<a href="～～～.html">パスワードを忘れた方はこちら</a>
			</u>
		</p>

	</div>

	<script>
		// 画面表示時に起動
  ons.ready(function() {
    // アラートビューの表示
     //ons.notification.alert('ようこそ');

  });

  // javaScript関数
  function login(){
    //id="username"の値を取得
    var mailAddress = document.getElementById('mailAddress').value;
    //id="password"の値を取得
    var password = document.getElementById('password').value;

    var MC = monaca.cloud;
    MC.User.login(mailAddress, password)
       //ログイン成功した場合
      .done(function(result)
      {
        // ログを表示
        console.log('login: '  + MC.User._oid);
        console.log("Hello again, " + result.user._username);
        document.getElementById('nav').pushPage('top.html', {});

        // Userクラスに情報を設定
      })
       //ログイン失敗した場合
      .fail(function(err)
      {
        ons.notification.alert('ユーザーIDまたはパスワードが間違っています。');
        //ons.notification.alert(err.message);

        console.error(JSON.stringify(err));
      });
  };

  function test(){
    mailAddress = "sato@jp.com";
    password = "aaaa";
    var MC = monaca.cloud;
    MC.User.login(mailAddress, password)
       //ログイン成功した場合
      .done(function(result)
      {
        console.log('login: '  + MC.User._oid);
        console.log("Hello again, " + result.user._username);
        
        // Userクラスに情報を設定
      })
       //ログイン失敗した場合
      .fail(function(err)
      {
        alert('Login failed: ' + err.message);
        console.error(JSON.stringify(err));
      });     
  }

  // // onsenUI関数
  // ons.getScriptPage().onInit = function() {
  //   this.querySelector('#send_userRegist').onclick = (e) => {
  //     var username = document.getElementById('username').value;
  //     var password = document.getElementById('password').value;      
  //     // const message = document.getElementById('message').value;

  //     //テキストフィールドの空チェック
  //       if (username === '' || password === '' ) {
  //         ons.notification.alert('入力されていません');
  //         return;
  //       }
  //       document.getElementById('nav').pushPage('userRegist.html', {
  //         data: {
  //           username,password
  //         }
  //       });
  //     }      
  //   };

//--------------------------
	</script>
</ons-page>