<ons-page id="itemDetail">
	<ons-toolbar>
		<div class="left">
			<ons-back-button>Back</ons-back-button>
		</div>
		<div class="center">アイテム詳細</div>
	</ons-toolbar>
	<div style="text-align: center">
		<img id="image_top" src="/www/image/1_1_pink.png">
	</div>
	<table border="0">
		<tr>
			<td>カテゴリー</td>
			<td> : </td>
			<td id="category">category</td>
		</tr>
		<tr>
			<td>サブカテゴリー</td>
			<td> : </td>
			<td id="sub_category">sub_category</td>
		</tr>
		<tr>
			<td>色</td>
			<td> : </td>
			<td id="color">color</td>
		</tr>
		<tr>
			<td>柄</td>
			<td> : </td>
			<td id="design">design</td>
		</tr>
    <!--
		<tr>
			<td>画像ID</td>
			<td> : </td>
			<td id="image_mid">imageID</td>
		</tr>
    -->
		<tr>
			<td>素材</td>
			<td> : </td>
			<td id="material">material</td>
		</tr>
		<tr>
			<td>季節</td>
			<td> : </td>
			<td id="season">season</td>
		</tr>
		<tr>
			<td>サイズ</td>
			<td> : </td>
			<td id="size">size</td>
		</tr>
		<tr>
			<td>ブランド</td>
			<td> : </td>
			<td id="brand">brand</td>
		</tr>
		<tr>
			<td>備考</td>
			<td> : </td>
			<td id="remarks">remarks</td>
		</tr>
	</table>

	<ons-button id = "edit">編集</ons-button>
	<script>
    // ニフクラmobile backendのキー設定
    // API key.
    var applicationKey    = "a5b0d94a415cb1c985e0766684fb926608305759441c8777962112ea428df5ae";
    var clientKey = "c0d33b2d67b4aeb9e608b6c2774965128e10e2c267e06c19654032e4a8f1de2e";
    // SDK initialization.
    var ncmb = new NCMB(applicationKey, clientKey);
    var items = ncmb.DataStore("item");

    // 画面表示時
    ons.getScriptPage().onShow = function() {
    var itemID_detail = this.data.itemID_detail;
      console.log("detail :" + itemID_detail);
      items.equalTo("objectId", this.data.itemID_detail)
         .fetchAll()
         .then(function(results){
            for (var i = 0; i < results.length; i++) {
              var object = results[i];
              console.log("image :" + object.get("image"));
              document.getElementById("category").innerHTML = convert_category(object.get("category"))
              document.getElementById("sub_category").innerHTML = convert_sub_category(object.get("category"),object.get("sub_category"))
              document.getElementById("color").innerHTML = convert_color(object.get("color"))
              document.getElementById("design").innerHTML = convert_design(object.get("design"))
              document.getElementById("material").innerHTML = convert_material(object.get("material"))
              document.getElementById("season").innerHTML = convert_season(object.get("season"))
              document.getElementById("size").innerHTML = convert_size(object.get("size"))        
              // これやると画面が崩れる...
              // document.getElementById("image_mid").innerHTML = object.get("image")
              document.getElementById("image_top").src = object.get("image")
              document.getElementById("brand").innerHTML = object.get("brand")
              document.getElementById("remarks").innerHTML = object.get("remarks")
            }
          })
         .catch(function(err){
            console.log(err);
          });

        var edit_button =  document.getElementById("edit");
        edit_button.onclick = (function() {
            return function(){
              var itemID_edit = itemID_detail;
              document.getElementById('nav').pushPage('itemEdit.html', {
               data:{itemID_edit} 
            });
            }
          })();
    }
    
    // function send_ItemEditPage(){
    //   var itemID_edit = itemID_detail;
    //   document.getElementById('nav').pushPage('itemEdit.html', {
    //     data: {itemID_edit}
    //     // 次画面で、this.data.itemID_editをすればとれる
    //   });
    // }
	</script>
</ons-page>